webpackJsonp([4],{139:function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0}),e.init=void 0;var o=i(309),s=n(o),a=i(7),r=n(a);e.init=function(){var t=s.default.create({title:"Popup Title",template:"<div>12</div>",buttons:[{text:"确定"},{text:"取消"}]});(0,r.default)("#showPopup").click(function(){return t.setDisplay(!0)}),(0,r.default)("#alertPopup").click(function(){return s.default.alert({template:"操作成功！"})}),(0,r.default)("#confirmPopup").click(function(){return s.default.confirm({template:"确认操作?"}).then(function(t){s.default.tip.show("ok",t?"选择了是":"选择了否")})})}},299:function(t,e,i){"use strict";var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},o=i(7),s=i(24),a=s.utils.dom,r=function(t){this.options=t=t||{},this.element=a(t.element),this.nearby=a(t.nearby);var e=this.nearby&&this.nearby[0]===window;this.position=o.extend(e?{top:50,left:50}:{top:100,left:0},t.position),void 0!==this.position.right&&delete this.position.left,void 0!==this.position.bottom&&delete this.position.top,this.relative=void 0!=t.relative?t.relative:!!e,this.fixed=void 0===t.fixed&&e?"fixed":t.fixed,this.cssFixed="fixed"==this.fixed&&e,this.offset=t.offset||[0,0],this.isWrap=this.nearby&&(e||this.nearby.find(this.element).length),this.autoAdjust=t.autoAdjust,this.element&&this.bind()};r.prototype={bind:function(){var t=this,e=this.element.data("align");e?this.nearby.add(window).off(e):(e=".align"+(new Date).getTime(),this.element.data("align",e));var i=this.options.scrollby||!this.cssFixed&&this.fixed&&this.nearby;i&&o(i).on("scroll"+e,function(){t.set()}),o(window).on("resize"+e,function(){t.set()}),this.set()},get:function(t){t=t||this.nearby;var e=t.offset();return{width:t.outerWidth(),height:t.outerHeight(),x:e?e.left:0,y:e?e.top:0,scrollLeft:this.cssFixed?0:t.scrollLeft(),scrollTop:this.cssFixed?0:t.scrollTop(),WIDTH:this.element.outerWidth(!0),HEIGHT:this.element.outerHeight(!0)}},set:function(t){if(this.element){t=t||{};var e=a(t.nearby)||this.nearby;if(e&&!this.element.is(":hidden")){var i=t.position||this.position;this.element.css("position",this.cssFixed?"fixed":"absolute");var o,s,r,l,c,u=this.get(e),p={x:{},y:{}},d={};this.isWrap&&(u.x=u.y=0),p.x.element="WIDTH",p.y.element="HEIGHT",p.x.nearby="width",p.y.nearby="height",p.x.offset=0,p.y.offset=1,p.x.scroll="scrollLeft",p.y.scroll="scrollTop";for(s in i)r=i[s],l=void 0===r?"undefined":n(r),"function"==l&&(r=r(u),l=void 0===r?"undefined":n(r)),c="top"==s||"bottom"==s?"y":"x",o=p[c],r="number"==l?(u[o.nearby]-(this.relative?u[o.element]:0))*r/100:parseInt(r,10),"bottom"!=s&&"right"!=s||(r*=-1,r-=u[o.element]-u[o.nearby]),r+=u[c]+this.offset[o.offset]+u[o.scroll],d["x"==c?"left":"top"]=r;var h=!this.isWrap&&this.checkBorder(u,i,d);return h?(this.options.onTurn&&this.options.onTurn.call(this,h),void this.set({position:h,nearby:e})):"animate"==this.fixed?void this.element.stop().animate(d,200):void this.element.css(d)}}},checkBorder:function(t,e,i){if(this.turnPosition)return void(this.turnPosition=null);var n,s={},a=o(window);for(var r in e)s[r]=e[r];if(i.left<0||i.left>t.WIDTH&&t.WIDTH+i.left-a.scrollLeft()>a.width()){var l=e.left,c=e.right;void 0!=l?(delete s.left,s.right=l):void 0!=c&&(delete s.right,s.left=c),n=!0}if(i.top<0||i.top>t.HEIGHT&&t.HEIGHT+i.top-a.scrollTop()>a.height()){var u=e.top,p=e.bottom;void 0!=u?(delete s.top,s.bottom=u):void 0!=p&&(delete s.bottom,s.top=p),n=!0}return n?this.turnPosition=s:void 0}};var l=s.mixins;t.exports=l.align={getDefaultProps:function(){return{}},setAlign:function(t){var e=this.isMounted?this.align:null;this.align=e||new r(t),this.align.set(t)}}},301:function(t,e,i){"use strict";var n=i(24),o=n.React,s=n.ReactDOM,a=n.utils,r=o.createClass({displayName:"Mask",mixins:[n.mixins.setDisplay],getDefaultProps:function(){return{effect:"fade"}},statics:function(){var t,e;return{show:function(i){e=e||n.utils.createContainer("nj-mask ng-layer-wrap"),this.mask=t=s.render(o.createElement(r,null),e),t.setState({name:i}),t.setDisplay(!0)},hide:function(){t&&(t.setDisplay(!1),t.setState({name:""}))}}}(),componentDidMount:function(){a.stopScroll(s.findDOMNode(this),function(t){t.preventDefault()})},render:function(){var t=this.state,e=t.name,i=t.className;return o.createElement("div",{ref:"layer",className:a.joinClass(e,i)})}});t.exports=r},309:function(t,e,i){"use strict";var n=i(24),o=i(7),s=i(299),a=i(301),r=n.React,l=n.ReactDOM,c=n.mixins,u=[],p=[],d=function(t){t&&(p.indexOf(t)<0&&p.push(t),p.forEach(function(e){e.setState({isFocus:e===t})}))},h=function t(){t.init||(t.init=1,o(document).on("keydown",function(t){if(27==t.keyCode){var e=p.slice(-1)[0];e&&e.props.bindEsc&&e.setDisplay(!1)}}))},f={create:function(t){t=t||{};var e=l.render(r.createElement(m,t),n.utils.createContainer("nj-popup-container ng-layer-wrap"));return h(),u.push(e),e},destory:function(t){u.forEach(function(e,i){e===t&&(u.splice(i,1),document.body.removeChild(l.findDOMNode(e).parentNode))})},alert:function(t){t=Object.assign({title:"提示：",name:"popup-alert popup-tip",bindEsc:!1,buttons:[{text:"确定",className:"nj-button nj-button-red",handle:function(t){return!0}}]},t);var e=m.create(t);return e.onHide(function(){m.destory(this)}),window.setTimeout(function(){e.setDisplay(!0)},1),e},confirm:function(t){t=Object.assign({title:"提示：",showClose:!1,name:"popup-confirm popup-tip",buttons:[{text:"确定",className:"nj-button nj-button-red",handle:function(t){return!0}},{text:"取消",className:"nj-button"}]},t),t.template=r.createElement("div",null,r.createElement("span",{className:"nj-icon nj-icon-warn"}),r.createElement("div",{className:"_content"},t.template));var e=m.create(t);return e.onHide(function(){m.destory(this)}),e.setDisplay(!0),e},tip:function(){return{show:function(t,e,i){i=i||{},m.tip.hide();var n=void 0!==i.timer?i.timer:1500;"loading"==t?e=e||"loading……":n&&setTimeout(function(){o.setDisplay(!1)},n);var o=m.tip.handle=m.alert({title:"",template:r.createElement("div",{className:"tip-area tip-"+t},r.createElement("i",{className:"nj-icon nj-icon-"+t}),r.createElement("span",{className:"tip-text",dangerouslySetInnerHTML:{__html:e}})),showMask:!1,buttons:null}),s=i.reload;s&&o.onShow(function(){window.setTimeout(function(){"string"==typeof s?window.location.href=s:window.location.reload()},1500)})},hide:function(){var t=m.tip.handle;t&&t.setDisplay(!1)}}}()},m=r.createClass({displayName:"Popup",mixins:[s,c.setDisplay,r.addons.LinkedStateMixin],statics:f,getDefaultProps:function(){return{effect:"drop",showMask:!0,bindEsc:!0}},getInitialState:function(){return{buttons:this.props.buttons||[],title:this.props.title||"",template:this.props.template}},componentWillMount:function(){this.thenEvent=n.utils.addEventQueue.call(this,"then")},componentDidMount:function(){this.setAlign({nearby:window,position:this.props.position,element:l.findDOMNode(this)}),this.onShow(function(){this.props.showMask&&a.show(),d(this),this.align.set({position:this.props.position})}).onHide(function(){var t=this;p.pop();var e;p.forEach(function(i){i.props.showMask&&i!==t&&(e=i)}),this.props.showMask&&!e&&a.hide(),this.setState({isFocus:null}),d(p.slice(-1)[0]),this.thenEvent.complete(this.res)})},componentWillUnmount:function(){console.log(this)},buttonHandle:function(t,e){this.res=t&&t.call(this,e);e.isDefaultPrevented()||this.setDisplay(!1,e)},cancel:function(){this.res=!1,this.setDisplay(!1)},render:function(){var t=this.state.template;t="function"==typeof t?t.call(this):t;var e=r.createElement("div",{className:"_body",ref:"body"},t);"string"==typeof t&&(e=r.createElement("div",{className:"_body",ref:"body",dangerouslySetInnerHTML:{__html:t}}));var i=n.utils.joinClass("nj-popup",this.state.className,this.state.isFocus&&"popup-active",this.props.name),o=this.state.buttons;return r.createElement("div",{className:i},r.createElement("div",{className:"_close",onClick:this.cancel}),r.createElement("div",{className:"_head"},this.state.title),e,r.createElement("div",{className:o.length?"_foot":"d_hide"},o.map(function(t,e){var i=t.className;return i||(i="nj-button ",i+=0==e?"nj-button-red":"nj-button-default"),r.createElement("button",{key:e,type:"button",className:i,onClick:this.buttonHandle.bind(this,t.handle)},t.text)}.bind(this))))}});t.exports=m}});